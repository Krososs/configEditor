<Config>
	canvas.before:
		Color:
			rgba: (48/255,48/255,50/255,1)
		RoundedRectangle:
			pos: self.pos
			size: self.size
<Container>
	canvas.before:
		Color:
			rgba: (48/255,48/255,50/255,1)
		RoundedRectangle:
			pos: self.pos
			size: self.size

<ConfigList>
	name: "ConfigList"
	error: error
	name: name
	scrollview: scrollview
	destination_button: destination_button
	destination: destination
	BoxLayout:
		size_hint: 1, 1
		orientation: "horizontal"
		canvas.before:
		    Color:
		        rgba: (52/255,56/255,64/255,1)
            Rectangle:
                pos: self.pos
                size: self.size
		BoxLayout:
			orientation: "vertical"
			size_hint: .5, 1
			BoxLayout:
				size_hint: .8, .1
				pos_hint:{"x":.1}
				Label:
					text: "Configs"
			ScrollView:
				id: scrollview
				size_hint: .8, .8
				pos_hint:{"x":.1, "y":.1}
				canvas.before:
		            Color:
			            rgba: (46/255,45/255,45/255,0.5)
                    Rectangle:
                        pos: self.pos
                        size: self.size
            BoxLayout:
				size_hint: .8, .1
		BoxLayout:
			size_hint: .4, 1
			orientation: "vertical"
			BoxLayout:
                size_hint: 1, .1
                Label:
                    text: "New config"
            BoxLayout:
                size_hint: 1, .35
                orientation: "vertical"
                canvas.before:
                    Color:
                        rgba: (46/255,45/255,45/255,1)
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                BoxLayout:							#CONFIG NAME
                    size_hint: 1, .1
                    orientation: "horizontal"
                    Label:
                        size_hint: .5, .5
                        pos_hint:{"y":.1}
                        text: "Name"
                    TextInput:
                        id: name
                        size_hint: .5, .5
                        pos_hint:{"y":.1}
                        multiline: False
                FloatLayout:
                    size_hint: 1, .1
                    orientation: "horizontal"
                    Button:
                        pos_hint:{"x":.3, "y":.2}
                        size_hint: .4, .6
                        background_color: (46/255,45/255,45/255,1)
                        id: destination_button
                        text: "Select destination"
                        on_press: root.open_destination_popup()
                BoxLayout:
                    size_hint: 1, .1
                    Label:
                        pos_hint:{"x":.2, "y":.2}
                        size_hint: .6, .6
                        id: destination
                FloatLayout:
                    size_hint: 1, .1
                    Button:
                        pos_hint:{"x":.3, "y":.2}
                        size_hint: .4, .6
                        background_color: (46/255,45/255,45/255,1)
                        text: "Save"
                        on_press: root.save_new_config()
                BoxLayout:
                    size_hint: 1, .1
                    Label:
                        color: 1, 0, 0, 1
                        font_size: 20
                        id: error
                        valign: 'top'
			BoxLayout:
				size_hint: 1, .25
		BoxLayout:
		    size_hint: .1, 1
<ConfigDetails>
	name: "ConfigDetails"
	config_name: config_name
	config_destination: config_destination
	scrollview: scrollview
	container_options: container_options
	list_name: list_name

	BoxLayout:
		size_hint: 1, 1
		orientation: "horizontal"
		canvas.before:
		    Color:
			    rgba: (52/255,56/255,64/255,1)
            Rectangle:
                pos: self.pos
                size: self.size
        BoxLayout:
            size_hint: .2, 1
            orientation: "vertical"
            BoxLayout:
                size_hint: 1, .1
                Label:
                    font_size: 20
                    id: config_name
			BoxLayout:						#SET AS DEFAULT BUTTON
				size_hint: .8, .1
				pos_hint:{"x":.1}
				Label:
                    font_size: 15
                    text_size: self.size
                    id: config_destination
			FloatLayout:						#ADD CONTAINER BUTTON
				size_hint: 1, .1
				Button:
					pos_hint:{"x":.2, "y":.25}
					size_hint: .6, .5
					background_color: (46/255,45/255,45/255,1)
					text: "Add container"
					on_press: root.open_new_container_popup()
			FloatLayout:						#DELETE BUTTON
				size_hint: 1, .1
				Button:
					pos_hint:{"x":.2, "y":.25}
					size_hint: .6, .5
					background_color: (46/255,45/255,45/255,1)
					text: "Delete"
					on_press: root.open_delete_config_popup()
			FloatLayout:						#BACK BUTTON
				size_hint: 1, .1
				Button:
					pos_hint:{"x":.2, "y":.25}
					size_hint: .6, .5
					background_color: (46/255,45/255,45/255,1)
					text: "Back"
					on_press: root.back_to_list()
			FloatLayout:						#ADD CONTAINER BUTTON
				size_hint: 1, .5
		BoxLayout:
			size_hint: .8, 1
			orientation: "vertical"
			BoxLayout:
				size_hint: 1, .1
				Label:
					id: list_name
			ScrollView:
				id: scrollview
				size_hint: 1, .8
				scroll_wheel_distance: 200
				canvas.before:
		            Color:
			            rgba: (46/255,45/255,45/255,0.5)
                    Rectangle:
                        pos: self.pos
                        size: self.size
			BoxLayout:
				id: container_options
				size_hint: 1, .1


<LoadingScreen>
    name: "loading"
    progress: progress
    BoxLayout
        size_hint: 1,1
        orientation: "vertical"
        canvas.before:
			Color:
				rgba: (52/255,56/255,64/255,1)
			Rectangle:
				pos: self.pos
				size: self.size
        BoxLayout:
            size_hint: 1, .2
            Label:
                font_size: 20
                text: "Collecting bricks"
        FloatLayout:
            size_hint: 1, .2
            ProgressBar:
                id: progress
                min: 0
                max: 66
                size_hint: .8, 1
				pos_hint:{"x":.1}
        BoxLayout:
            size_hint: 1, .6
<ApiScreen>
    name: "api"
    key: key
    error: error
    BoxLayout
        size_hint: 1,1
        orientation: "vertical"
        canvas.before:
			Color:
				rgba: (52/255,56/255,64/255,1)
			Rectangle:
				pos: self.pos
				size: self.size
        BoxLayout:
			orientation: "vertical"
			size_hint: 1, .3
			Label:
			    font_size: 20
				text: "Please provide your Rebrickable API Key"
			TextInput:
				multiline: False
				id: key
				size_hint: .3, .2
				pos_hint:{"x":.35, "y":.4}
		FloatLayout:
			size_hint: 1, .2
			Label:
			    id: error
			    pos_hint:{"x":.2, "y":.35}
				size_hint: .6, 1
			    font_size: 18
			    color: 1, 0, 0, .9
			Button:
				pos_hint:{"x":.45, "y":.35}
				size_hint: .1, .3
				background_color: (46/255,45/255,45/255,1)
				text: "Ok"
				on_press: root.save_api_key()
		BoxLayout:
			orientation: "horizontal"
			size_hint: 1, .5

<MainScreen>:
	name: "basic"
	left: left
	bottom: bottom
	BoxLayout:
		orientation: "horizontal"
		BoxLayout:
			id: left
			orientation: "vertical"
			size_hint: 1, 1
			canvas.before:
				Color:
					rgba: (255/255,39/255,97/255,0)
				Rectangle:
					pos: self.pos
					size: self.size
			BoxLayout:
				id: bottom
				size_hint: 1, 1
				orientation: "horizontal"
				canvas.before:
					Color:
						rgba: (8/255,255/255,2/255,0)
					Rectangle:
						pos: self.pos
						size: self.size

<NewContainerPopup>:
    title: ""
    title_size: root.height *.01
    multiline: False
    auto_dismiss: False
    separator_color: (0/255,0/255,0/255,0)
	background_color: (75/255, 71/255, 71/255,1)
	size_hint: .3, .4
	error: error
	name: name
	position: position

	BoxLayout:
		orientation: "vertical"
		size_hint: 1, 1
		BoxLayout:
			orientation: "horizontal"
			size_hint: 1, .3
			Label:
				size_hint: .5, .7
				text: "Name"
			TextInput:
				size_hint: .5, .7
				multiline: False
				id: name
		BoxLayout:
			orientation: "horizontal"
			size_hint: 1, .3
			Label:
				size_hint: .5, .7
				text: "Position"
			TextInput:
				size_hint: .5, .7
				multiline: False
				id: position
				input_filter: 'int'
		BoxLayout:
			orientation: "horizontal"
			size_hint: 1, .2
			Label:
				color: 1, 0, 0, 1
				id: error
		FloatLayout:
			size_hint: 1, .25
			Button:
				pos_hint:{"x":.3, "y":.1}
				size_hint: .4, .8
				text: "Ok"
				on_press: root.add_container()
		FloatLayout:
			size_hint: 1, .25
			Button:
				pos_hint:{"x":.3, "y":.1}
				size_hint: .4, .8
				text: "Cancel"
				on_press: root.dismiss()

<ChangePositionPopup>:
    title: ""
    title_size: root.height *.01
    multiline: False
    auto_dismiss: False
    separator_color: (0/255,0/255,0/255,0)
	background_color: (75/255, 71/255, 71/255,1)
	size_hint: .3, .4
	error: error
	position: position

	BoxLayout:
		orientation: "vertical"
		size_hint: 1, 1
		BoxLayout:
			orientation: "horizontal"
			size_hint: 1, .3
			Label:
				size_hint: .5, .5
				text: "Position"
			TextInput:
				size_hint: .5, .5
				multiline: False
				id: position
				input_filter: 'int'
		BoxLayout:
			orientation: "horizontal"
			size_hint: 1, .2
			Label:
				color: 1, 0, 0, 1
				id: error
		FloatLayout:
			size_hint: 1, .2
			Button:
				pos_hint:{"x":.3, "y":.1}
				size_hint: .4, .8
				text: "Ok"
				on_press: root.change_container_position()
		FloatLayout:
			size_hint: 1, .2
			Button:
				pos_hint:{"x":.3, "y":.1}
				size_hint: .4, .8
				text: "Cancel"
				on_press: root.dismiss()

<DeleteContainerPopup>:
	title: ""
	title_size: root.height *.05
	multiline: False
	auto_dismiss: False
	separator_color: (0/255,0/255,0/255,0)
	background_color: (75/255, 71/255, 71/255,1)
	size_hint: .3, .4
	BoxLayout:
		orientation: "vertical"
		size_hint: 1, 1
		Label:
			size_hint: 1, .5
			font_size: 20
			text: "Confirm"
		FloatLayout:
			size_hint: 1, .5
			Button:
				pos_hint:{"x":.3, "y":.1}
				size_hint: .4, .8
				text: "Ok"
				on_press: root.delete_container()
		FloatLayout:
			size_hint: 1, .5
			Button:
				pos_hint:{"x":.3, "y":.1}
				size_hint: .4, .8
				text: "Cancel"
				on_press: root.dismiss()

<DeleteConfigPopup>:
	title: ""
	title_size: root.height *.01
	multiline: False
	auto_dismiss: False
	separator_color: (0/255,0/255,0/255,0)
	background_color: (75/255, 71/255, 71/255,1)
	size_hint: .3, .4
	error: error
	BoxLayout:
		orientation: "vertical"
		size_hint: 1, 1
		Label:
			size_hint: 1, .25
			font_size: 22
			text: "Confirm"
		BoxLayout:
		    size_hint: 1, .25
            Label:
                color: 1, 0, 0, 1
                font_size: 16
                id: error
                valign: 'center'
                halign: 'center'
		FloatLayout:
			size_hint: 1, .25
			Button:
				pos_hint:{"x":.3, "y":.1}
				size_hint: .4, .8
				text: "Ok"
				on_press: root.delete_config()
		FloatLayout:
			size_hint: 1, .25
			Button:
				pos_hint:{"x":.3, "y":.1}
				size_hint: .4, .8
				text: "Cancel"
				on_press: root.dismiss()

<ImagePopup>
	title: ""
	title_size: 0
	multiline: False
	auto_dismiss: True
	separator_color: (0/255,0/255,0/255,0)
	background_color: (75/255, 71/255, 71/255,1)
	size_hint: .35, .65
	img: img
	BoxLayout:
	    id: img
	    orientation: "vertical"
		size_hint: 1, 1

<SaveDialog>:
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser
        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()
            Button:
                text: "Save"
                on_release: root.save(filechooser.path)